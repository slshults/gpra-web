@tailwind base;
@tailwind components;
@tailwind utilities;

/* Dark mode CSS variables (default theme) - CRITICAL: This must match the design system */
:root {
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;
  --card: 222.2 84% 4.9%;
  --card-foreground: 210 40% 98%;
  --popover: 222.2 84% 4.9%;
  --popover-foreground: 210 40% 98%;
  --primary: 217.2 32.6% 12%;
  --primary-foreground: 210 40% 98%;
  --secondary: 217.2 32.6% 17.5%;
  --secondary-foreground: 210 40% 98%;
  --muted: 217.2 32.6% 17.5%;
  --muted-foreground: 215 20.2% 65.1%;
  --accent: 217.2 32.6% 17.5%;
  --accent-foreground: 210 40% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 210 40% 98%;
  --border: 217.2 32.6% 17.5%;
  --input: 217.2 32.6% 17.5%;
  --ring: 212.7 26.8% 83.9%;
  --radius: .5rem;
}

/* Force dark button styling for chord chart buttons */
.chord-charts-container button {
  background-color: #1a1a1a !important;
  color: #f0f0f0 !important;
}

/* Force dark styling for small edit/delete buttons on chord charts */
.chord-charts-container button.bg-gray-900 {
  background-color: hsl(217.2 32.6% 12%) !important;
  color: hsl(210 40% 98%) !important;
}

/* Force dark styling for Button components inside chord charts container */
.chord-charts-container .bg-primary {
  background-color: hsl(217.2 32.6% 12%) !important;
}

.chord-charts-container .text-primary-foreground {
  color: hsl(210 40% 98%) !important;
}

/* Target outline variant buttons that might be white */
.chord-charts-container .bg-background {
  background-color: hsl(217.2 32.6% 12%) !important;
  color: hsl(210 40% 98%) !important;
}

/* Target any other button variants that might appear white */
.chord-charts-container button[class*="bg-"]:not(.bg-blue-):not(.bg-green-):not(.bg-red-):not(.bg-purple-):not(.bg-orange-):not(.bg-yellow-) {
  background-color: hsl(217.2 32.6% 12%) !important;
  color: hsl(210 40% 98%) !important;
}

/* PostHog survey styling - dark input field to match GPRA theme */
[class*="PostHogSurvey"] textarea,
[class*="PostHogSurvey"] .textarea {
  background-color: #0a0d14 !important;
  color: #f7f9fb !important;
  border-color: #1f2937 !important;
}

[class*="PostHogSurvey"] textarea::placeholder,
[class*="PostHogSurvey"] .textarea::placeholder {
  color: #9ca3af !important;
}

/* Custom styles for the guitar practice app */

/* Modal scroll styling */
.modal-scroll::-webkit-scrollbar {
  width: 8px;
}

.modal-scroll::-webkit-scrollbar-track {
  background: #374151;
}

.modal-scroll::-webkit-scrollbar-thumb {
  background: #6b7280;
  border-radius: 4px;
}

.modal-scroll::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

.modal-scroll {
  scrollbar-width: thin;
  scrollbar-color: #6b7280 #374151;
}

/* Print styles for chord charts */
@media print {
  body * {
    visibility: hidden;
  }

  .chord-chart-print-area,
  .chord-chart-print-area * {
    visibility: visible;
  }

  .chord-chart-print-area {
    position: absolute !important;
    left: 0 !important;
    top: 0 !important;
    width: 100% !important;
    background: white !important;
    color: black !important;
    padding: 20px !important;
  }

  .chord-chart-print-area .bg-gray-700,
  .chord-chart-print-area .bg-gray-800 {
    background: white !important;
    border: 1px solid #ddd !important;
  }

  .chord-chart-print-area .text-gray-300,
  .chord-chart-print-area .text-gray-200,
  .chord-chart-print-area .text-white {
    color: black !important;
  }

  .chord-chart-print-area button {
    display: none !important;
  }

  .chord-chart-print-area svg {
    background: white !important;
  }

  .chord-chart-print-area svg path,
  .chord-chart-print-area svg line,
  .chord-chart-print-area svg rect {
    stroke: black !important;
    fill: none !important;
  }

  .chord-chart-print-area svg circle {
    fill: black !important;
    stroke: black !important;
  }

  .chord-chart-print-area svg text {
    fill: black !important;
  }
}

/* Light mode styles */
.light-mode {
  --background: 0 0% 100%;
  --foreground: 222.2 47.4% 11.2%;
  --card: 0 0% 100%;
  --card-foreground: 222.2 47.4% 11.2%;
  --popover: 0 0% 100%;
  --popover-foreground: 222.2 47.4% 11.2%;
  --primary: 222.2 47.4% 11.2%;
  --primary-foreground: 210 40% 98%;
  --secondary: 210 40% 96%;
  --secondary-foreground: 222.2 47.4% 11.2%;
  --muted: 210 40% 96%;
  --muted-foreground: 215.4 16.3% 46.9%;
  --accent: 210 40% 96%;
  --accent-foreground: 222.2 47.4% 11.2%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 210 40% 98%;
  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --ring: 215 20.2% 65.1%;
}

body.light-mode {
  background-color: #ffffff !important;
  color: #000000 !important;
}

.light-mode .bg-gray-700 {
  background-color: #f3f4f6 !important;
}

.light-mode .bg-gray-800 {
  background-color: #e5e7eb !important;
}

.light-mode .bg-gray-900 {
  background-color: #d1d5db !important;
}

.light-mode .text-gray-100 {
  color: #1f2937 !important;
}

.light-mode .text-gray-200 {
  color: #374151 !important;
}

.light-mode .text-gray-300 {
  color: #4b5563 !important;
}

.light-mode .text-gray-400 {
  color: #6b7280 !important;
}

.light-mode .text-gray-500 {
  color: #9ca3af !important;
}

.light-mode .text-white {
  color: #000000 !important;
}

.light-mode .border-gray-600 {
  border-color: #d1d5db !important;
}

.light-mode .border-gray-700 {
  border-color: #e5e7eb !important;
}

/* Preserve orange accent text in light mode */
.light-mode .text-orange-400 {
  color: #f97316 !important;
}

.light-mode h1,
.light-mode h2,
.light-mode h3,
.light-mode h4,
.light-mode h5,
.light-mode h6,
.light-mode p,
.light-mode span,
.light-mode div {
  color: #000000 !important;
}

.light-mode .bg-blue-600 {
  background-color: #2563eb !important;
}

.light-mode .bg-blue-700 {
  background-color: #1d4ed8 !important;
}

.light-mode .bg-red-500 {
  background-color: #ef4444 !important;
}

.light-mode .bg-red-600 {
  background-color: #dc2626 !important;
}

.light-mode .bg-green-500 {
  background-color: #22c55e !important;
}

/* SVG styling for light mode */
.light-mode svg {
  background: #ffffff !important;
}

.light-mode svg path,
.light-mode svg line,
.light-mode svg rect {
  stroke: #000000 !important;
}

.light-mode svg circle {
  fill: #000000 !important;
  stroke: #000000 !important;
}

.light-mode svg text {
  fill: #000000 !important;
}

/* Theme toggle button */
.theme-toggle {
  opacity: 0.6;
  transition: opacity 0.2s;
  cursor: pointer;
  margin-top: 60px;
  margin-bottom: 20px;
  text-align: center;
}

.theme-toggle:hover {
  opacity: 1;
}

/* Half-size reCAPTCHA badge - Google allows hiding when text attribution is present,
   but we'll show it small instead. Scale to 50% anchored to bottom-right. */
.grecaptcha-badge {
  transform: scale(0.5) !important;
  transform-origin: right bottom !important;
  right: 0 !important;
  bottom: 14px !important;
  visibility: visible !important;
}

/* =============================================================
   PostHog Conversations Widget - visibility control
   Hidden by default to prevent flash on pages where it's not wanted.
   JS adds 'show-ph-widget' class to <body> on pages where it should appear.
   ============================================================= */
#ph-conversations-widget-container {
  display: none !important;
}

body.show-ph-widget #ph-conversations-widget-container {
  display: block !important;
}

/* =============================================================
   PostHog Conversations Widget - GPRA theme overrides
   All rules need !important since PostHog uses inline styles.

   Widget DOM structure (when open):
     #ph-conversations-widget-container
       > DIV (fixed-pos wrapper)
         > DIV (panel container - has background:white inline)
           > DIV:first-child (HEADER - has background:rgb(255,170,0) inline)
           > DIV:nth-child(2) (BODY - has background:rgb(238,237,237) inline)
             > DIV (title), DIV (description), FORM, ...
   ============================================================= */

/* Dark mode (default) */

/* Floating chat button - GPRA orange */
#ph-conversations-widget-container button[aria-label="Open chat"] {
  background-color: #ea580c !important;
  color: #ffffff !important;
  font-family: inherit !important;
}
#ph-conversations-widget-container button[aria-label="Open chat"]:hover {
  background-color: #c2410c !important;
}

/* Close button */
#ph-conversations-widget-container button[aria-label="Close"] {
  color: #f3f4f6 !important;
}

/* Panel container (the white rounded box) - 3 levels deep:
   #container > div(fixed wrapper) > div(panel) */
#ph-conversations-widget-container > div > div {
  background-color: #0f172a !important;
}

/* Panel header - 4 levels deep, first child of panel.
   Overrides PostHog's yellow/gold rgb(255,170,0) with GPRA orange */
#ph-conversations-widget-container > div > div > div:first-child {
  background-color: #ea580c !important;
  color: #ffffff !important;
  font-family: inherit !important;
  border-bottom: 1px solid #c2410c !important;
}

/* Panel body / conversation area - 4 levels deep, second child of panel.
   Overrides PostHog's light gray rgb(238,237,237) with dark background */
#ph-conversations-widget-container > div > div > div:nth-child(2) {
  background-color: #0f172a !important;
  color: #e2e8f0 !important;
  font-family: inherit !important;
}

/* Title and description text divs inside body */
#ph-conversations-widget-container > div > div > div:nth-child(2) > div {
  color: #e2e8f0 !important;
}

/* data-panel attribute selectors (if PostHog adds them) */
#ph-conversations-widget-container [data-panel="header"] {
  background-color: #ea580c !important;
  color: #ffffff !important;
  font-family: inherit !important;
  border-bottom: 1px solid #c2410c !important;
}

#ph-conversations-widget-container [data-panel="body"] {
  background-color: #0f172a !important;
  color: #e2e8f0 !important;
  font-family: inherit !important;
}

/* Form inputs */
#ph-conversations-widget-container form input,
#ph-conversations-widget-container form textarea {
  background-color: #1e293b !important;
  color: #f3f4f6 !important;
  border-color: #334155 !important;
  font-family: inherit !important;
}
#ph-conversations-widget-container form input::placeholder,
#ph-conversations-widget-container form textarea::placeholder {
  color: #94a3b8 !important;
}
#ph-conversations-widget-container form input:focus,
#ph-conversations-widget-container form textarea:focus {
  border-color: #ea580c !important;
  outline: none !important;
  box-shadow: 0 0 0 1px #ea580c !important;
}

/* Form labels */
#ph-conversations-widget-container form label {
  color: #cbd5e1 !important;
  font-family: inherit !important;
}

/* Submit button - GPRA orange */
#ph-conversations-widget-container form button[type="submit"] {
  background-color: #ea580c !important;
  color: #ffffff !important;
  font-family: inherit !important;
}
#ph-conversations-widget-container form button[type="submit"]:hover {
  background-color: #c2410c !important;
}

/* General font inside the widget */
#ph-conversations-widget-container p,
#ph-conversations-widget-container span,
#ph-conversations-widget-container div,
#ph-conversations-widget-container h1,
#ph-conversations-widget-container h2,
#ph-conversations-widget-container h3 {
  font-family: inherit !important;
}

/* Force light text colors on all text elements inside widget (dark mode) */
#ph-conversations-widget-container p,
#ph-conversations-widget-container span,
#ph-conversations-widget-container h1,
#ph-conversations-widget-container h2,
#ph-conversations-widget-container h3 {
  color: #e2e8f0 !important;
}

/* ---- Light mode overrides ---- */

/* Panel container */
.light-mode #ph-conversations-widget-container > div > div {
  background-color: #ffffff !important;
}

/* Header - keep GPRA orange in light mode too */
.light-mode #ph-conversations-widget-container > div > div > div:first-child,
.light-mode #ph-conversations-widget-container [data-panel="header"] {
  background-color: #ea580c !important;
  color: #ffffff !important;
  border-bottom: 1px solid #c2410c !important;
}

/* Body */
.light-mode #ph-conversations-widget-container > div > div > div:nth-child(2),
.light-mode #ph-conversations-widget-container [data-panel="body"] {
  background-color: #ffffff !important;
  color: #334155 !important;
}

/* Text inside body in light mode */
.light-mode #ph-conversations-widget-container > div > div > div:nth-child(2) > div {
  color: #334155 !important;
}

/* Close button stays white on orange header */
.light-mode #ph-conversations-widget-container button[aria-label="Close"] {
  color: #ffffff !important;
}

.light-mode #ph-conversations-widget-container form input,
.light-mode #ph-conversations-widget-container form textarea {
  background-color: #f8fafc !important;
  color: #1e293b !important;
  border-color: #cbd5e1 !important;
}
.light-mode #ph-conversations-widget-container form input::placeholder,
.light-mode #ph-conversations-widget-container form textarea::placeholder {
  color: #94a3b8 !important;
}

.light-mode #ph-conversations-widget-container form label {
  color: #475569 !important;
}

.light-mode #ph-conversations-widget-container p,
.light-mode #ph-conversations-widget-container span,
.light-mode #ph-conversations-widget-container div {
  color: #334155 !important;
}

/* Keep header text white even in light mode (orange bg needs white text) */
.light-mode #ph-conversations-widget-container > div > div > div:first-child p,
.light-mode #ph-conversations-widget-container > div > div > div:first-child span,
.light-mode #ph-conversations-widget-container > div > div > div:first-child div,
.light-mode #ph-conversations-widget-container > div > div > div:first-child h1,
.light-mode #ph-conversations-widget-container > div > div > div:first-child h2,
.light-mode #ph-conversations-widget-container > div > div > div:first-child h3,
.light-mode #ph-conversations-widget-container > div > div > div:first-child button {
  color: #ffffff !important;
}

/* =============================================================
   PostHog Conversations Widget - Chat bubble overrides (NUCLEAR)
   The old approach tried to match specific inline RGB values with
   attribute selectors, but PostHog changes these values across
   versions. Instead, we use depth-based selectors: chat message
   bubbles are deeply nested (5+ div levels), while the header,
   form inputs, and buttons are at shallower levels or have
   specific element types we can whitelist back.
   ============================================================= */

/* ---------- Dark mode (default) ---------- */

/* Force dark backgrounds on ALL deeply nested divs in the chat area.
   5-level div nesting targets message bubbles specifically. */
#ph-conversations-widget-container div div div div div {
  background-color: #1e293b !important;
  color: #e2e8f0 !important;
}

/* Ensure ALL text inside deeply nested bubbles is light */
#ph-conversations-widget-container div div div div div span,
#ph-conversations-widget-container div div div div div p {
  color: #e2e8f0 !important;
}

/* Whitelist: keep the header orange (shallower, more specific selector wins) */
#ph-conversations-widget-container > div > div > div:first-child {
  background-color: #ea580c !important;
  color: #ffffff !important;
}

/* Whitelist: keep form inputs their own dark shade */
#ph-conversations-widget-container form input,
#ph-conversations-widget-container form textarea {
  background-color: #1e293b !important;
  color: #f3f4f6 !important;
  border-color: #334155 !important;
}

/* Whitelist: keep submit button orange */
#ph-conversations-widget-container form button[type="submit"] {
  background-color: #ea580c !important;
  color: #ffffff !important;
}

/* ---------- Light mode ---------- */

/* Force light backgrounds on all deeply nested chat divs */
.light-mode #ph-conversations-widget-container div div div div div {
  background-color: #f1f5f9 !important;
  color: #334155 !important;
}

/* Light text in deeply nested bubbles */
.light-mode #ph-conversations-widget-container div div div div div span,
.light-mode #ph-conversations-widget-container div div div div div p {
  color: #334155 !important;
}

/* Whitelist: header stays orange in light mode */
.light-mode #ph-conversations-widget-container > div > div > div:first-child {
  background-color: #ea580c !important;
  color: #ffffff !important;
}

/* Whitelist: form inputs in light mode */
.light-mode #ph-conversations-widget-container form input,
.light-mode #ph-conversations-widget-container form textarea {
  background-color: #f8fafc !important;
  color: #1e293b !important;
  border-color: #cbd5e1 !important;
}