{"version":3,"file":"auth.js","sources":["components/LoginPage.jsx","components/RegisterPage.jsx","components/ForgotPasswordPage.jsx","components/ResetPasswordPage.jsx","auth.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Button } from '@ui/button';\nimport { Input } from '@ui/input';\nimport { Label } from '@ui/label';\nimport { Card, CardHeader, CardTitle, CardContent, CardDescription } from '@ui/card';\nimport { Alert, AlertDescription } from '@ui/alert';\nimport { Loader2, AlertCircle, CheckCircle2, Eye, EyeOff } from 'lucide-react';\n\nconst RECAPTCHA_LOGIN_SITE_KEY = '6LcaNhssAAAAABV70hE2Sw6_CwxBQf3sf-1_xiMl';\n\nconst LoginPage = () => {\n  const [emailOrUsername, setEmailOrUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [recaptchaLoaded, setRecaptchaLoaded] = useState(false);\n\n  useEffect(() => {\n    // Check for password reset success message\n    const urlParams = new URLSearchParams(window.location.search);\n    if (urlParams.get('password_reset') === 'success') {\n      setSuccessMessage('Password reset successful! You can now log in with your new password.');\n    }\n  }, []);\n\n  useEffect(() => {\n    const loadRecaptchaScript = () => {\n      if (window.grecaptcha?.enterprise) {\n        setRecaptchaLoaded(true);\n        return;\n      }\n\n      const existingScript = document.querySelector('script[src*=\"recaptcha/enterprise.js\"]');\n      if (existingScript) return;\n\n      const script = document.createElement('script');\n      script.src = `https://www.google.com/recaptcha/enterprise.js?render=${RECAPTCHA_LOGIN_SITE_KEY}`;\n      script.async = true;\n      script.defer = true;\n      script.onload = () => setRecaptchaLoaded(true);\n      document.head.appendChild(script);\n    };\n\n    // Load after consent or immediately if already consented\n    const consent = localStorage.getItem('cookieConsent');\n    if (consent === 'all') {\n      loadRecaptchaScript();\n    }\n\n    // Also load on first form interaction\n    const handleInteraction = () => loadRecaptchaScript();\n    const form = document.querySelector('form');\n    form?.addEventListener('focus', handleInteraction, { once: true, capture: true });\n\n    return () => form?.removeEventListener('focus', handleInteraction, { capture: true });\n  }, []);\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n\n    if (!emailOrUsername.trim() || !password.trim()) {\n      setError('Please enter both email/username and password');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Get reCAPTCHA token\n      let recaptchaToken = '';\n      if (window.grecaptcha?.enterprise) {\n        recaptchaToken = await window.grecaptcha.enterprise.execute(\n          RECAPTCHA_LOGIN_SITE_KEY,\n          { action: 'login' }\n        );\n      }\n\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          emailOrUsername,\n          password,\n          recaptcha_token: recaptchaToken\n        }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        // Identify user with PostHog after successful login\n        try {\n          const authResponse = await fetch('/api/auth/status');\n          const authData = await authResponse.json();\n\n          if (authData.authenticated && window.posthog) {\n            // Use posthog_distinct_id (email or tidalNNNNN) to coordinate with backend\n            window.posthog.identify(authData.posthog_distinct_id, {\n              email: authData.email,\n              username: authData.user,\n              subscription_tier: authData.tier,\n              billing_period: authData.billing_period,\n              oauth_providers: authData.oauth_providers || []\n            });\n          }\n        } catch (err) {\n          console.error('Failed to identify user with PostHog:', err);\n        }\n\n        // Redirect to main app on success\n        window.location.href = '/';\n      } else {\n        setError(data.error || 'Invalid email or password');\n      }\n    } catch (err) {\n      console.error('Login error:', err);\n      setError('An error occurred. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-md\">\n        {/* App Title */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-orange-500 mb-2\" style={{lineHeight: '1.2'}}>\n            <span className=\"whitespace-nowrap\">Guitar Practice</span>\n            {' '}\n            <span className=\"whitespace-nowrap\">Routine App</span>\n          </h1>\n        </div>\n\n        {/* Login Card */}\n        <Card className=\"bg-gray-800 border-gray-700\">\n          <CardHeader>\n            <CardTitle className=\"text-gray-100\">Login</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleLogin} className=\"space-y-4\">\n              {/* Success Alert */}\n              {successMessage && (\n                <Alert className=\"bg-green-900/30 border-green-700\">\n                  <CheckCircle2 className=\"h-4 w-4 text-green-400\" />\n                  <AlertDescription className=\"text-gray-300\">{successMessage}</AlertDescription>\n                </Alert>\n              )}\n\n              {/* Error Alert */}\n              {error && (\n                <Alert className=\"bg-red-900/30 border-red-700\">\n                  <AlertCircle className=\"h-4 w-4 text-red-400\" />\n                  <AlertDescription className=\"text-gray-300\">{error}</AlertDescription>\n                </Alert>\n              )}\n\n              {/* OAuth Buttons */}\n              <div className=\"space-y-3\">\n                <a href=\"/login/google\" className=\"block\">\n                  <Button\n                    type=\"button\"\n                    className=\"w-full bg-white hover:bg-gray-100 text-gray-900 border border-gray-300\"\n                    disabled={loading}\n                  >\n                    <svg className=\"mr-2 h-5 w-5\" viewBox=\"0 0 24 24\">\n                      <path\n                        d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n                        fill=\"#4285F4\"\n                      />\n                      <path\n                        d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n                        fill=\"#34A853\"\n                      />\n                      <path\n                        d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n                        fill=\"#FBBC05\"\n                      />\n                      <path\n                        d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n                        fill=\"#EA4335\"\n                      />\n                    </svg>\n                    Sign in with Google\n                  </Button>\n                </a>\n                <a href=\"/login/tidal\" className=\"block\">\n                  <Button\n                    type=\"button\"\n                    className=\"w-full bg-black hover:bg-gray-900 text-white border border-gray-700\"\n                    disabled={loading}\n                  >\n                    <svg className=\"mr-2 h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                      <path d=\"M12 0L8 4L12 8L16 4L12 0Z\"/>\n                      <path d=\"M12 8L8 12L12 16L16 12L12 8Z\"/>\n                      <path d=\"M4 8L0 12L4 16L8 12L4 8Z\"/>\n                      <path d=\"M20 8L16 12L20 16L24 12L20 8Z\"/>\n                      <path d=\"M12 16L8 20L12 24L16 20L12 16Z\"/>\n                    </svg>\n                    Sign in with Tidal\n                  </Button>\n                </a>\n              </div>\n\n              {/* OAuth Separator */}\n              <div className=\"relative my-6\">\n                <div className=\"absolute inset-0 flex items-center\">\n                  <div className=\"w-full border-t border-gray-600\"></div>\n                </div>\n                <div className=\"relative flex justify-center text-sm\">\n                  <span className=\"px-2 bg-gray-800 text-gray-400\">Or</span>\n                </div>\n              </div>\n\n              {/* Email or Username Input */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"emailOrUsername\" className=\"text-gray-200\">Email or Username</Label>\n                <Input\n                  id=\"emailOrUsername\"\n                  type=\"text\"\n                  value={emailOrUsername}\n                  onChange={(e) => setEmailOrUsername(e.target.value)}\n                  placeholder=\"you@example.com or username\"\n                  className=\"bg-gray-900 border-gray-600 text-gray-100\"\n                  disabled={loading}\n                  required\n                />\n              </div>\n\n              {/* Password Input */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"password\" className=\"text-gray-200\">Password</Label>\n                <div className=\"relative\">\n                  <Input\n                    id=\"password\"\n                    type={showPassword ? \"text\" : \"password\"}\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\n                    className=\"bg-gray-900 border-gray-600 text-gray-100 pr-10\"\n                    disabled={loading}\n                    required\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200 z-10\"\n                    disabled={loading}\n                    tabIndex={-1}\n                  >\n                    {showPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\n                  </button>\n                </div>\n              </div>\n\n              {/* Login Button */}\n              <Button\n                type=\"submit\"\n                className=\"w-full bg-orange-600 hover:bg-orange-700 text-white\"\n                disabled={loading}\n              >\n                {loading ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Logging in...\n                  </>\n                ) : (\n                  'Login'\n                )}\n              </Button>\n\n              {/* Forgot Password Link */}\n              <div className=\"text-center\">\n                <a\n                  href={`/forgot-password${emailOrUsername ? `?email=${encodeURIComponent(emailOrUsername)}` : ''}`}\n                  className=\"text-xs text-gray-500 hover:text-gray-200\"\n                >\n                  Forgot password\n                </a>\n              </div>\n\n              {/* Register Link */}\n              <div className=\"text-center text-sm text-gray-400 mt-6\">\n                Don't have an account?{' '}\n                <a href=\"/register\" className=\"text-orange-500 hover:text-orange-400 font-medium\">\n                  Sign up\n                </a>\n                <div className=\"text-xs text-gray-500 mt-1\">\n                  (No card needed for 1 free routine)\n                </div>\n              </div>\n\n              {/* reCAPTCHA Privacy Notice */}\n              <p className=\"text-xs text-gray-500 mt-4 text-center\">\n                Site protected by reCAPTCHA, to which the Google{' '}\n                <a href=\"https://policies.google.com/privacy\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"underline\">\n                  Privacy Policy\n                </a>{' '}\n                and{' '}\n                <a href=\"https://policies.google.com/terms\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"underline\">\n                  Terms of Service\n                </a>{' '}\n                apply.\n              </p>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Button } from '@ui/button';\nimport { Input } from '@ui/input';\nimport { Label } from '@ui/label';\nimport { Card, CardHeader, CardTitle, CardContent, CardDescription } from '@ui/card';\nimport { Alert, AlertDescription } from '@ui/alert';\nimport { Loader2, AlertCircle, Eye, EyeOff } from 'lucide-react';\n\nconst RECAPTCHA_SITE_KEY = '6LcjIvQrAAAAAM4psu6wJT3NlL8RIwH4tNiiAJ6C';\n\nconst RegisterPage = () => {\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [showPasswords, setShowPasswords] = useState(false); // Single state for both password fields\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [recaptchaToken, setRecaptchaToken] = useState(null);\n  const [agreedToTerms, setAgreedToTerms] = useState(false);\n  const [recaptchaWidgetId, setRecaptchaWidgetId] = useState(null);\n  const [recaptchaReady, setRecaptchaReady] = useState(false);\n  const recaptchaRef = useRef(null);\n\n  // Track if user has clicked Terms and Privacy links\n  const [clickedTerms, setClickedTerms] = useState(false);\n  const [clickedPrivacy, setClickedPrivacy] = useState(false);\n  const [showReadFirstModal, setShowReadFirstModal] = useState(false);\n\n  // Password requirements validation\n  const passwordRequirements = {\n    length: password.length >= 14,\n    uppercase: /[A-Z]/.test(password),\n    lowercase: /[a-z]/.test(password),\n    number: /[0-9]/.test(password),\n    symbol: /[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?]/.test(password)\n  };\n\n  const passwordsDontMatch = confirmPassword.length > 0 && password !== confirmPassword;\n\n  // GDPR-compliant: Load reCAPTCHA only after consent or on form interaction\n  useEffect(() => {\n    const consent = localStorage.getItem('cookieConsent');\n    if (consent === 'all') {\n      loadRecaptchaScript();\n    }\n  }, []);\n\n  // Load reCAPTCHA when user shows intent to register (GDPR-compliant)\n  useEffect(() => {\n    const hasFormActivity = username || email || password;\n    const consent = localStorage.getItem('cookieConsent');\n\n    if (hasFormActivity && consent === 'all') {\n      loadRecaptchaScript();\n    }\n  }, [username, email, password]);\n\n  // Render checkbox widget when script loads and container is ready\n  useEffect(() => {\n    if (recaptchaReady && window.grecaptcha?.enterprise && recaptchaRef.current && recaptchaWidgetId === null) {\n      try {\n        const widgetId = window.grecaptcha.enterprise.render(recaptchaRef.current, {\n          sitekey: RECAPTCHA_SITE_KEY,\n          callback: (token) => setRecaptchaToken(token),\n          'expired-callback': () => setRecaptchaToken(null),\n          'error-callback': () => setRecaptchaToken(null),\n          theme: 'dark'\n        });\n        setRecaptchaWidgetId(widgetId);\n      } catch (e) {\n        // Widget may already be rendered\n        console.log('reCAPTCHA widget already rendered');\n      }\n    }\n  }, [recaptchaReady, recaptchaWidgetId]);\n\n  // Load reCAPTCHA Enterprise script with explicit render\n  const loadRecaptchaScript = () => {\n    if (window.grecaptcha?.enterprise) {\n      setRecaptchaReady(true);\n      return Promise.resolve();\n    }\n\n    // Check if script is already being loaded\n    if (document.querySelector('script[src*=\"recaptcha/enterprise.js\"]')) {\n      return Promise.resolve();\n    }\n\n    return new Promise((resolve) => {\n      // Set up callback for when grecaptcha is ready\n      window.onRecaptchaLoad = () => {\n        setRecaptchaReady(true);\n        resolve();\n      };\n\n      const script = document.createElement('script');\n      script.src = 'https://www.google.com/recaptcha/enterprise.js?onload=onRecaptchaLoad&render=explicit';\n      script.async = true;\n      script.defer = true;\n      document.head.appendChild(script);\n    });\n  };\n\n  const resetRecaptcha = () => {\n    setRecaptchaToken(null);\n    if (window.grecaptcha?.enterprise && recaptchaWidgetId !== null) {\n      try {\n        window.grecaptcha.enterprise.reset(recaptchaWidgetId);\n      } catch (e) {\n        console.log('Could not reset reCAPTCHA widget');\n      }\n    }\n  };\n\n  const validatePassword = () => {\n    if (password.length < 14) {\n      return 'Password must be at least 14 characters long';\n    }\n    if (!/[A-Z]/.test(password)) {\n      return 'Password must contain at least one uppercase letter';\n    }\n    if (!/[a-z]/.test(password)) {\n      return 'Password must contain at least one lowercase letter';\n    }\n    if (!/[0-9]/.test(password)) {\n      return 'Password must contain at least one number';\n    }\n    if (!/[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?]/.test(password)) {\n      return 'Password must contain at least one symbol or punctuation character';\n    }\n    return null;\n  };\n\n  const handleRegister = async (e) => {\n    e.preventDefault();\n\n    // Load reCAPTCHA on-demand if not already loaded (GDPR-compliant)\n    if (!window.grecaptcha || !window.grecaptcha.enterprise) {\n      setLoading(true);\n      await loadRecaptchaScript();\n      setLoading(false);\n      // Wait a moment for reCAPTCHA to render\n      await new Promise(resolve => setTimeout(resolve, 500));\n      setError('reCAPTCHA loaded! Please complete it and try again.');\n      return;\n    }\n\n    // Validate inputs\n    if (!username.trim()) {\n      setError('Please enter a username');\n      return;\n    }\n    if (!email.trim()) {\n      setError('Please enter an email');\n      return;\n    }\n    if (!password.trim()) {\n      setError('Please enter a password');\n      return;\n    }\n\n    // Validate password strength\n    const passwordError = validatePassword();\n    if (passwordError) {\n      setError(passwordError);\n      return;\n    }\n\n    // Validate password match\n    if (password !== confirmPassword) {\n      setError('Passwords do not match');\n      return;\n    }\n\n    // Validate terms acceptance\n    if (!agreedToTerms) {\n      setError('Please agree to the Terms of Service and Privacy Policy');\n      return;\n    }\n\n    // Validate reCAPTCHA completed\n    if (!recaptchaToken) {\n      setError('Please complete the reCAPTCHA challenge');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/auth/register', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, email, password, recaptcha_token: recaptchaToken }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        // Identify user with PostHog after successful registration\n        try {\n          const authResponse = await fetch('/api/auth/status');\n          const authData = await authResponse.json();\n\n          if (authData.authenticated && window.posthog) {\n            // Use posthog_distinct_id (email or tidalNNNNN) to coordinate with backend\n            window.posthog.identify(authData.posthog_distinct_id, {\n              email: authData.email,\n              username: authData.user,\n              subscription_tier: authData.tier,\n              billing_period: authData.billing_period,\n              oauth_providers: authData.oauth_providers || []\n            });\n          }\n        } catch (err) {\n          console.error('Failed to identify user with PostHog:', err);\n        }\n\n        setSuccess(true);\n        // Set flag to show tour after login\n        sessionStorage.setItem('show_tour_after_login', 'true');\n        // User will click \"Let's go!\" button to proceed\n      } else {\n        setError(data.error || 'Registration failed');\n        resetRecaptcha();\n      }\n    } catch {\n      setError('An error occurred. Please try again.');\n      resetRecaptcha();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (success) {\n    return (\n      <div className=\"min-h-screen bg-gray-900 flex items-center justify-center p-4\">\n        <Card className=\"w-full max-w-md bg-gray-800 border-gray-700\">\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center space-y-4\">\n              <span className=\"text-6xl block\" role=\"img\" aria-label=\"guitar\">ðŸŽ¸</span>\n              <h2 className=\"text-2xl font-bold text-gray-100\">Welcome to GPRA!</h2>\n              <p className=\"text-gray-400\">\n                You now have an account, and we've logged you in. Click that button to start the tour...\n              </p>\n              <Button\n                onClick={() => window.location.href = '/'}\n                className=\"bg-orange-600 hover:bg-orange-700 text-white mt-4\"\n              >\n                Let's go!\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-md\">\n        {/* App Title */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-orange-500 mb-2\" style={{lineHeight: '1.2'}}>\n            <span className=\"whitespace-nowrap\">Guitar Practice</span>\n            {' '}\n            <span className=\"whitespace-nowrap\">Routine App</span>\n          </h1>\n          <p className=\"text-gray-400\">Create your account</p>\n        </div>\n\n        {/* Register Card */}\n        <Card className=\"bg-gray-800 border-gray-700\">\n          <CardHeader>\n            <CardTitle className=\"text-gray-100\">Sign Up</CardTitle>\n            <div className=\"text-xs text-gray-500 mt-2\">\n              (We won't spam you or sell your info to spammers.)\n            </div>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleRegister} className=\"space-y-4\">\n              {/* Error Alert */}\n              {error && (\n                <Alert className=\"bg-red-900/30 border-red-700\">\n                  <AlertCircle className=\"h-4 w-4 text-red-400\" />\n                  <AlertDescription className=\"text-gray-300\">{error}</AlertDescription>\n                </Alert>\n              )}\n\n              {/* OAuth Buttons */}\n              <div className=\"space-y-3\">\n                <a href=\"/oauth-signup/google\" className=\"block\">\n                  <Button\n                    type=\"button\"\n                    className=\"w-full bg-white hover:bg-gray-100 text-gray-900 border border-gray-300\"\n                    disabled={loading}\n                  >\n                    <svg className=\"mr-2 h-5 w-5\" viewBox=\"0 0 24 24\">\n                      <path\n                        d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n                        fill=\"#4285F4\"\n                      />\n                      <path\n                        d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n                        fill=\"#34A853\"\n                      />\n                      <path\n                        d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n                        fill=\"#FBBC05\"\n                      />\n                      <path\n                        d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n                        fill=\"#EA4335\"\n                      />\n                    </svg>\n                    Sign up with Google\n                  </Button>\n                </a>\n                <a href=\"/oauth-signup/tidal\" className=\"block\">\n                  <Button\n                    type=\"button\"\n                    className=\"w-full bg-black hover:bg-gray-900 text-white border border-gray-700\"\n                    disabled={loading}\n                  >\n                    <svg className=\"mr-2 h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                      <path d=\"M12 0L8 4L12 8L16 4L12 0Z\"/>\n                      <path d=\"M12 8L8 12L12 16L16 12L12 8Z\"/>\n                      <path d=\"M4 8L0 12L4 16L8 12L4 8Z\"/>\n                      <path d=\"M20 8L16 12L20 16L24 12L20 8Z\"/>\n                      <path d=\"M12 16L8 20L12 24L16 20L12 16Z\"/>\n                    </svg>\n                    Sign up with Tidal\n                  </Button>\n                </a>\n              </div>\n\n              {/* OAuth Separator */}\n              <div className=\"relative my-6\">\n                <div className=\"absolute inset-0 flex items-center\">\n                  <div className=\"w-full border-t border-gray-600\"></div>\n                </div>\n                <div className=\"relative flex justify-center text-sm\">\n                  <span className=\"px-2 bg-gray-800 text-gray-400\">Or</span>\n                </div>\n              </div>\n\n              {/* Username Input */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"username\" className=\"text-gray-200\">Username</Label>\n                <Input\n                  id=\"username\"\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  placeholder=\"e.g.: some_name\"\n                  className=\"bg-gray-900 border-gray-600 text-gray-100\"\n                  disabled={loading}\n                  required\n                />\n              </div>\n\n              {/* Email Input */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email\" className=\"text-gray-200\">Email</Label>\n                <Input\n                  id=\"email\"\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  placeholder=\"e.g.: someone@somewhere.com\"\n                  className=\"bg-gray-900 border-gray-600 text-gray-100\"\n                  disabled={loading}\n                  required\n                />\n              </div>\n\n              {/* Password Input */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"password\" className=\"text-gray-200\">Password</Label>\n                <div className=\"relative\">\n                  <Input\n                    id=\"password\"\n                    type={showPasswords ? \"text\" : \"password\"}\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\n                    className=\"bg-gray-900 border-gray-600 text-gray-100 pr-10\"\n                    disabled={loading}\n                    required\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPasswords(!showPasswords)}\n                    className=\"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200 z-10\"\n                    disabled={loading}\n                    tabIndex={-1}\n                  >\n                    {showPasswords ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\n                  </button>\n                </div>\n                <p className=\"text-xs text-gray-500\">\n                  Must be 14+ characters with uppercase, lowercase, number, and symbol\n                </p>\n              </div>\n\n              {/* Password Requirements Checklist - Only show when user starts typing in password field */}\n              {password.length > 0 && (\n                <div className=\"text-xs space-y-1\">\n                  <p className=\"text-gray-400 mb-1\">Password requirements:</p>\n                  <div className=\"space-y-0.5\">\n                    <div className={`flex items-center ${passwordRequirements.length ? 'text-green-400' : 'text-gray-500'}`}>\n                      {passwordRequirements.length ? 'âœ“' : 'â—‹'} At least 14 characters\n                    </div>\n                    <div className={`flex items-center ${passwordRequirements.uppercase ? 'text-green-400' : 'text-gray-500'}`}>\n                      {passwordRequirements.uppercase ? 'âœ“' : 'â—‹'} One uppercase letter\n                    </div>\n                    <div className={`flex items-center ${passwordRequirements.lowercase ? 'text-green-400' : 'text-gray-500'}`}>\n                      {passwordRequirements.lowercase ? 'âœ“' : 'â—‹'} One lowercase letter\n                    </div>\n                    <div className={`flex items-center ${passwordRequirements.number ? 'text-green-400' : 'text-gray-500'}`}>\n                      {passwordRequirements.number ? 'âœ“' : 'â—‹'} One number\n                    </div>\n                    <div className={`flex items-center ${passwordRequirements.symbol ? 'text-green-400' : 'text-gray-500'}`}>\n                      {passwordRequirements.symbol ? 'âœ“' : 'â—‹'} One symbol or punctuation\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Confirm Password Input */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"confirmPassword\" className=\"text-gray-200\">Confirm Password</Label>\n                <div className=\"relative\">\n                  <Input\n                    id=\"confirmPassword\"\n                    type={showPasswords ? \"text\" : \"password\"}\n                    value={confirmPassword}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                    placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\n                    className=\"bg-gray-900 border-gray-600 text-gray-100 pr-10\"\n                    disabled={loading}\n                    required\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPasswords(!showPasswords)}\n                    className=\"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200 z-10\"\n                    disabled={loading}\n                    tabIndex={-1}\n                  >\n                    {showPasswords ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\n                  </button>\n                </div>\n\n                {/* Password Mismatch Indicator */}\n                {passwordsDontMatch && (\n                  <p className=\"text-xs text-red-400\">\n                    Passwords don't match\n                  </p>\n                )}\n              </div>\n\n              {/* Terms of Service Checkbox */}\n              <div className=\"flex items-start space-x-2\">\n                <input\n                  type=\"checkbox\"\n                  id=\"terms\"\n                  checked={agreedToTerms}\n                  onChange={(e) => {\n                    // If trying to check the box without clicking both links, show modal\n                    if (e.target.checked && (!clickedTerms || !clickedPrivacy)) {\n                      setShowReadFirstModal(true);\n                      e.target.checked = false;\n                      return;\n                    }\n                    setAgreedToTerms(e.target.checked);\n                  }}\n                  className=\"mt-1 h-4 w-4 rounded border-gray-600 bg-gray-900 text-orange-600 focus:ring-orange-500 focus:ring-offset-gray-800\"\n                  disabled={loading}\n                  required\n                />\n                <label htmlFor=\"terms\" className=\"text-sm text-gray-300\">\n                  I agree to the{' '}\n                  <a\n                    href=\"/terms\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"text-orange-500 hover:text-orange-400 underline\"\n                    onClick={() => setClickedTerms(true)}\n                  >\n                    Terms of Service\n                  </a>\n                  {' '}and{' '}\n                  <a\n                    href=\"/privacy\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"text-orange-500 hover:text-orange-400 underline\"\n                    onClick={() => setClickedPrivacy(true)}\n                  >\n                    Privacy Policy\n                  </a>\n                </label>\n              </div>\n\n              {/* Read First Modal */}\n              {showReadFirstModal && (\n                <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n                  <div className=\"bg-gray-800 border border-gray-600 rounded-lg p-6 max-w-md mx-4 shadow-xl\">\n                    <p className=\"text-gray-200 mb-4\">\n                      Seriously though, please read the terms and privacy policy first. They're written in plain language, not legalese.\n                    </p>\n                    <Button\n                      onClick={() => setShowReadFirstModal(false)}\n                      className=\"w-full bg-orange-600 hover:bg-orange-700 text-white\"\n                    >\n                      OK\n                    </Button>\n                  </div>\n                </div>\n              )}\n\n              {/* reCAPTCHA Enterprise Checkbox */}\n              <div className=\"flex justify-center\">\n                <div ref={recaptchaRef}></div>\n              </div>\n\n              {/* Register Button */}\n              <Button\n                type=\"submit\"\n                className=\"w-full bg-orange-600 hover:bg-orange-700 text-white\"\n                disabled={loading}\n              >\n                {loading ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Creating account...\n                  </>\n                ) : (\n                  'Create Account'\n                )}\n              </Button>\n\n              {/* Login Link */}\n              <div className=\"text-center text-sm text-gray-400 mt-6\">\n                Already have an account?{' '}\n                <a href=\"/login\" className=\"text-orange-500 hover:text-orange-400 font-medium\">\n                  Log in\n                </a>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default RegisterPage;\n","import React, { useState, useEffect } from 'react';\nimport { Button } from '@ui/button';\nimport { Input } from '@ui/input';\nimport { Label } from '@ui/label';\nimport { Card, CardHeader, CardTitle, CardContent, CardDescription } from '@ui/card';\nimport { Alert, AlertDescription } from '@ui/alert';\nimport { Loader2, AlertCircle, CheckCircle2 } from 'lucide-react';\n\nconst ForgotPasswordPage = () => {\n  const [email, setEmail] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [oauthAccount, setOauthAccount] = useState(false);\n\n  // Prefill email from URL parameter if present\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const emailParam = urlParams.get('email');\n    if (emailParam) {\n      setEmail(decodeURIComponent(emailParam));\n    }\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!email.trim()) {\n      setError('Please enter your email address');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/auth/forgot-password', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email }),\n      });\n\n      const data = await response.json();\n\n      if (data.success) {\n        setSuccess(true);\n      } else if (data.oauth_account) {\n        // OAuth account detected - show Google sign-in button\n        setOauthAccount(true);\n      } else if (data.rate_limited) {\n        // Rate limit exceeded\n        setError(data.message);\n      } else {\n        setError(data.error || data.message || 'Failed to send reset link');\n      }\n    } catch (err) {\n      console.error('Forgot password error:', err);\n      setError('An error occurred. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Success state - check your email\n  if (success) {\n    return (\n      <div className=\"min-h-screen bg-gray-900 flex items-center justify-center p-4\">\n        <Card className=\"w-full max-w-md bg-gray-800 border-gray-700\">\n          <CardContent className=\"pt-6\">\n            <div className=\"text-center space-y-4\">\n              <CheckCircle2 className=\"h-16 w-16 text-green-500 mx-auto\" />\n              <h2 className=\"text-2xl font-bold text-gray-100\">Check Your Email</h2>\n              <p className=\"text-gray-400\">\n                If an account exists with that email address, you'll receive password reset instructions shortly.\n                <br /><br />\n                (if it's not in your inbox, check the spam folder. Seriously though. Check the spam folder.)\n              </p>\n              <a href=\"/login\" className=\"block\">\n                <Button className=\"bg-orange-600 hover:bg-orange-700 text-white mt-4\">\n                  Return to Login\n                </Button>\n              </a>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  // OAuth account detected - show Google sign-in button\n  if (oauthAccount) {\n    return (\n      <div className=\"min-h-screen bg-gray-900 flex items-center justify-center p-4\">\n        <div className=\"w-full max-w-md\">\n          {/* App Title */}\n          <div className=\"text-center mb-8\">\n            <h1 className=\"text-3xl font-bold text-orange-500 mb-2\">Guitar Practice Routine App</h1>\n            <p className=\"text-gray-400\">Sign in with Google</p>\n          </div>\n\n          {/* OAuth Account Card */}\n          <Card className=\"bg-gray-800 border-gray-700\">\n            <CardContent className=\"pt-6\">\n              <div className=\"text-center space-y-4\">\n                <AlertCircle className=\"h-16 w-16 text-blue-400 mx-auto\" />\n                <h2 className=\"text-2xl font-bold text-gray-100\">OAuth Account</h2>\n                <p className=\"text-gray-400\">\n                  It looks like you signed up with Google, so you don't have a password to reset. Use this button instead:\n                </p>\n\n                {/* Google Sign-In Button */}\n                <a href=\"/login/google\" className=\"block\">\n                  <Button className=\"w-full bg-white hover:bg-gray-100 text-gray-900 font-semibold flex items-center justify-center gap-3 py-6\">\n                    <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                      <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                      <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                      <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                      <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n                    </svg>\n                    Sign in with Google\n                  </Button>\n                </a>\n\n                {/* Back to Login Link */}\n                <div className=\"text-center text-sm text-gray-400 mt-6\">\n                  <a href=\"/login\" className=\"text-orange-500 hover:text-orange-400 font-medium\">\n                    Back to Login\n                  </a>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-md\">\n        {/* App Title */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-orange-500 mb-2\">Guitar Practice Routine App</h1>\n          <p className=\"text-gray-400\">Reset your password</p>\n        </div>\n\n        {/* Forgot Password Card */}\n        <Card className=\"bg-gray-800 border-gray-700\">\n          <CardHeader>\n            <CardTitle className=\"text-gray-100\">Forgot Password</CardTitle>\n            <CardDescription className=\"text-gray-400\">\n              Enter the email address you signed up with. We'll send you a link to reset your password.\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              {/* Error Alert */}\n              {error && (\n                <Alert className=\"bg-red-900/30 border-red-700\">\n                  <AlertCircle className=\"h-4 w-4 text-red-400\" />\n                  <AlertDescription className=\"text-gray-300\">{error}</AlertDescription>\n                </Alert>\n              )}\n\n              {/* Email Input */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email\" className=\"text-gray-200\">Email</Label>\n                <Input\n                  id=\"email\"\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  placeholder=\"you@example.com\"\n                  className=\"bg-gray-900 border-gray-600 text-gray-100\"\n                  disabled={loading}\n                  required\n                />\n              </div>\n\n              {/* Submit Button */}\n              <Button\n                type=\"submit\"\n                className=\"w-full bg-orange-600 hover:bg-orange-700 text-white\"\n                disabled={loading}\n              >\n                {loading ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Sending...\n                  </>\n                ) : (\n                  'Send Reset Link'\n                )}\n              </Button>\n\n              {/* Back to Login Link */}\n              <div className=\"text-center text-sm text-gray-400 mt-6\">\n                Remember your password?{' '}\n                <a href=\"/login\" className=\"text-orange-500 hover:text-orange-400 font-medium\">\n                  Back to Login\n                </a>\n                <br />\n                <span className=\"text-gray-500 text-xs\">\n                  Don't remember which email address you signed up with? Try them all.\n                </span>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default ForgotPasswordPage;\n","import React, { useState, useEffect } from 'react';\nimport { Button } from '@ui/button';\nimport { Input } from '@ui/input';\nimport { Label } from '@ui/label';\nimport { Card, CardHeader, CardTitle, CardContent, CardDescription } from '@ui/card';\nimport { Alert, AlertDescription } from '@ui/alert';\nimport { Loader2, AlertCircle, Eye, EyeOff } from 'lucide-react';\n\nconst ResetPasswordPage = () => {\n  const [token, setToken] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [showPasswords, setShowPasswords] = useState({ password: false, confirm: false });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    // Extract token from URL query parameters\n    const urlParams = new URLSearchParams(window.location.search);\n    const tokenParam = urlParams.get('token');\n\n    if (tokenParam) {\n      setToken(tokenParam);\n    } else {\n      setError('Invalid or missing reset token');\n    }\n  }, []);\n\n  const validatePassword = () => {\n    if (password.length < 12) {\n      return 'Password must be at least 12 characters long';\n    }\n    if (!/[A-Z]/.test(password)) {\n      return 'Password must contain at least one uppercase letter';\n    }\n    if (!/[a-z]/.test(password)) {\n      return 'Password must contain at least one lowercase letter';\n    }\n    if (!/[0-9]/.test(password)) {\n      return 'Password must contain at least one number';\n    }\n    if (!/[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/.test(password)) {\n      return 'Password must contain at least one symbol or punctuation character';\n    }\n    return null;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!token) {\n      setError('Invalid or missing reset token');\n      return;\n    }\n\n    if (!password.trim() || !confirmPassword.trim()) {\n      setError('Please fill in all fields');\n      return;\n    }\n\n    if (password !== confirmPassword) {\n      setError('Passwords do not match');\n      return;\n    }\n\n    // Validate password strength\n    const passwordError = validatePassword();\n    if (passwordError) {\n      setError(passwordError);\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/auth/reset-password', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ token, password }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        // Redirect to login with success message\n        window.location.href = '/login?password_reset=success';\n      } else {\n        setError(data.error || 'Failed to reset password. The token may be expired or invalid.');\n      }\n    } catch (err) {\n      console.error('Reset password error:', err);\n      setError('An error occurred. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 flex items-center justify-center p-4\">\n      <div className=\"w-full max-w-md\">\n        {/* App Title */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-orange-500 mb-2\">Guitar Practice Routine App</h1>\n          <p className=\"text-gray-400\">Create a new password</p>\n        </div>\n\n        {/* Reset Password Card */}\n        <Card className=\"bg-gray-800 border-gray-700\">\n          <CardHeader>\n            <CardTitle className=\"text-gray-100\">Reset Password</CardTitle>\n            <CardDescription className=\"text-gray-400\">\n              Enter your new password below\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              {/* Error Alert */}\n              {error && (\n                <Alert className=\"bg-red-900/30 border-red-700\">\n                  <AlertCircle className=\"h-4 w-4 text-red-400\" />\n                  <AlertDescription className=\"text-gray-300\">{error}</AlertDescription>\n                </Alert>\n              )}\n\n              {/* New Password Input */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"password\" className=\"text-gray-200\">New Password</Label>\n                <div className=\"relative\">\n                  <Input\n                    id=\"password\"\n                    type={showPasswords.password ? 'text' : 'password'}\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\n                    className=\"bg-gray-900 border-gray-600 text-gray-100 pr-10\"\n                    disabled={loading || !token}\n                    required\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPasswords(prev => ({ ...prev, password: !prev.password }))}\n                    className=\"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300\"\n                    disabled={loading || !token}\n                  >\n                    {showPasswords.password ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                  </button>\n                </div>\n              </div>\n\n              {/* Confirm Password Input */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"confirmPassword\" className=\"text-gray-200\">Confirm Password</Label>\n                <div className=\"relative\">\n                  <Input\n                    id=\"confirmPassword\"\n                    type={showPasswords.confirm ? 'text' : 'password'}\n                    value={confirmPassword}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                    placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\n                    className=\"bg-gray-900 border-gray-600 text-gray-100 pr-10\"\n                    disabled={loading || !token}\n                    required\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPasswords(prev => ({ ...prev, confirm: !prev.confirm }))}\n                    className=\"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300\"\n                    disabled={loading || !token}\n                  >\n                    {showPasswords.confirm ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                  </button>\n                </div>\n              </div>\n\n              {/* Password Requirements */}\n              <div className=\"bg-blue-900/30 border border-blue-700 rounded-md p-3\">\n                <h4 className=\"text-sm font-semibold text-blue-300 mb-1\">Password Requirements:</h4>\n                <ul className=\"text-xs text-gray-300 space-y-0.5 list-disc list-inside\">\n                  <li>At least 12 characters long</li>\n                  <li>At least one uppercase letter</li>\n                  <li>At least one lowercase letter</li>\n                  <li>At least one number</li>\n                  <li>At least one symbol or punctuation character</li>\n                </ul>\n              </div>\n\n              {/* Submit Button */}\n              <Button\n                type=\"submit\"\n                className=\"w-full bg-orange-600 hover:bg-orange-700 text-white\"\n                disabled={loading || !token}\n              >\n                {loading ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Resetting Password...\n                  </>\n                ) : (\n                  'Reset Password'\n                )}\n              </Button>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default ResetPasswordPage;\n","// app/static/js/auth.js\nimport '../css/input.css'\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport LoginPage from '@components/LoginPage';\nimport RegisterPage from '@components/RegisterPage';\nimport ForgotPasswordPage from '@components/ForgotPasswordPage';\nimport ResetPasswordPage from '@components/ResetPasswordPage';\nimport CookieConsent from '@components/CookieConsent';\n\n// Get page type from data attribute\nconst authRoot = document.getElementById('auth-root');\nconst page = authRoot?.getAttribute('data-page');\n\n// Render appropriate page\nlet PageComponent;\nswitch (page) {\n  case 'register':\n    PageComponent = RegisterPage;\n    break;\n  case 'forgot-password':\n    PageComponent = ForgotPasswordPage;\n    break;\n  case 'reset-password':\n    PageComponent = ResetPasswordPage;\n    break;\n  default:\n    PageComponent = LoginPage;\n}\n\nReactDOM.createRoot(authRoot).render(\n  <React.StrictMode>\n    <PageComponent />\n    <CookieConsent />\n  </React.StrictMode>\n);\n"],"names":["RECAPTCHA_LOGIN_SITE_KEY","LoginPage","emailOrUsername","setEmailOrUsername","useState","password","setPassword","showPassword","setShowPassword","loading","setLoading","error","setError","successMessage","setSuccessMessage","recaptchaLoaded","setRecaptchaLoaded","useEffect","loadRecaptchaScript","_a","script","handleInteraction","form","handleLogin","e","recaptchaToken","response","data","authData","err","jsxs","jsx","Card","CardHeader","CardTitle","CardContent","Alert","CheckCircle2","AlertDescription","AlertCircle","Button","Label","Input","EyeOff","Eye","Fragment","Loader2","RECAPTCHA_SITE_KEY","RegisterPage","username","setUsername","email","setEmail","confirmPassword","setConfirmPassword","showPasswords","setShowPasswords","success","setSuccess","setRecaptchaToken","agreedToTerms","setAgreedToTerms","recaptchaWidgetId","setRecaptchaWidgetId","recaptchaReady","setRecaptchaReady","recaptchaRef","useRef","clickedTerms","setClickedTerms","clickedPrivacy","setClickedPrivacy","showReadFirstModal","setShowReadFirstModal","passwordRequirements","passwordsDontMatch","hasFormActivity","consent","widgetId","token","resolve","resetRecaptcha","validatePassword","handleRegister","passwordError","ForgotPasswordPage","oauthAccount","setOauthAccount","emailParam","handleSubmit","CardDescription","ResetPasswordPage","setToken","tokenParam","prev","authRoot","page","PageComponent","ReactDOM","React","CookieConsent"],"mappings":"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"}